<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="RestaurantMapper">

 	 <resultMap type="Restaurant" 			id="RestaurantResultMap">
	 	<id 	property="resNo" 			column="RES_NO"/>
	 	<result property="resArea" 			column="RES_AREA"/>
	 	<result property="resType" 			column="RES_TYPE"/>
	 	<result property="resName" 			column="RES_NAME"/>
	 	<result property="resTel" 			column="RES_TEL"/>
	 	<result property="resDayoff" 		column="RES_DAYOFF"/>
	 	<result property="resMainmenu" 		column="RES_MAINMENU"/>
	 	<result property="resDetail" 		column="RES_DETAIL"/>
	 	<result property="resFilename" 		column="RES_FILENAME"/>
	 	<result property="resFileRename" 	column="RES_FILERENAME"/>
	 	<result property="resFilepath" 		column="RES_FILEPATH"/>
	 	<result property="resMap" 			column="RES_MAP"/>
	 	<result property="resStatus" 		column="RES_STATUS"/>
	 	<result property="resAddress" 		column="RES_ADDRESS"/>
 	</resultMap>
 		
	<insert id="insertRestaurant">
		INSERT INTO RESTAURANT_TBL VALUES(SEQ_RES_NO.NEXTVAL, #{resArea}, #{resType}, #{resName}, #{resTel}, #{resDayoff} ,#{resMainmenu}, #{resDetail}, #{resFilename},#{resFileRename}, #{resFilepath}, #{resMap}, DEFAULT, #{resAddress})
	</insert>
	
	<select id="printOneByRestaurantNo" resultMap="RestaurantResultMap">
		SELECT * FROM RESTAURANT_TBL WHERE RES_NO = #{resNo}
	</select>
	
	<select id="getRestaurantCount" resultType="_int" parameterType="map">
		SELECT
			COUNT(*)
		FROM RESTAURANT_TBL
		WHERE RES_NAME LIKE '%'||#{searchValue}||'%'
		 <if test='!areaValue.equals("") and areaValue !=null'>
            AND RES_AREA = #{areaValue}
        </if>
			AND RES_TYPE IN
		<foreach item="resType" collection="typeValue" open="(" close=")" separator="," >
			#{resType}
		</foreach>
	</select>
	
	<select id="printRestaurantByValue" resultMap="RestaurantResultMap" parameterType="map">
		SELECT
		 * 
		FROM RESTAURANT_TBL
		WHERE RES_NAME LIKE '%'||#{searchValue}||'%'
		 <if test='!areaValue.equals("") and areaValue !=null'>
            AND RES_AREA = #{areaValue}
        </if>
			AND RES_TYPE IN
		<foreach item="resType" collection="typeValue" open="(" close=")" separator="," >
			#{resType}
		</foreach>
	</select>
</mapper>